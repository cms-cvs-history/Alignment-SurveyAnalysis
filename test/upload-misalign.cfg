process TEST = {
    
    // Message logger service
    include "FWCore/MessageService/data/MessageLogger.cfi"
    replace MessageLogger.cout.default.limit = 100000
    
    // Ideal geometry
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
    
    // Empty event source
    source = EmptySource { }
    untracked PSet maxEvents = {untracked int32 input = 1}
    
    // Reading from DB
    include "CondCore/DBCommon/data/CondDBCommon.cfi"
    replace CondDBCommon.connect = "sqlite_file:Misalignments.db"    
    replace CondDBCommon.catalog = "file:conddbcatalog-misalign.xml"
    es_source = PoolDBESSource { 
        using CondDBCommon
        VPSet toGet = {
            #{ string record = "TrackerAlignmentRcd" string tag = "TrackerShortTermScenario" },
            #{ string record = "TrackerAlignmentErrorRcd" 
            #    string tag = "TrackerShortTermScenarioErrors" }
            { string record = "TrackerAlignmentRcd" string tag = "Tracker100pbScenario" },
            { string record = "TrackerAlignmentErrorRcd" 
                string tag = "Tracker100pbScenarioErrors" }
        }
    }
    
    // Test module
    include "Alignment/SurveyAnalysis/test/dbSetup.cfi"	
    module prod =  SurveyMisalignmentInput {
	string textFileName = "csa07-dat.txt"
    }
    module uploader = SurveyDBUploader
    {
        string valueRcd = "TrackerSurveyRcd"
        string errorRcd = "TrackerSurveyErrorRcd"
    }
    service = PoolDBOutputService
    {
    using dbSetup
    VPSet toPut = { {using surveyValueRcd}, {using surveyErrorRcd} }
    }

    path p1 = { prod, uploader }      
    
}
